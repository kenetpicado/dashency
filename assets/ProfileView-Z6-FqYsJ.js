import{b as N,u as U,o as A,r as c,K as z,e as p,f as r,i as s,t as _,m as l,n as x,x as b,h as g,B,bJ as D,v as f,G as L,k as v,j as h,z as u}from"./index-ikaeWfkH.js";import{_ as i}from"./InputForm.vue_vue_type_script_setup_true_lang-C3toEXwb.js";const M={class:"grid grid-cols-2 gap-4"},S={key:0,class:"flex flex-col bg-white p-8 rounded-xl border"},j={class:"flex-1"},q=s("h4",{class:"mb-6 text-xl font-bold"},"Datos personales",-1),G={class:"w-full mb-4 text-gray-400"},I={class:"w-full flex justify-end"},$={class:"flex-1"},E=s("h4",{class:"mb-6 text-xl font-bold"},"Actualizar contraseña",-1),F={key:0,class:"w-full mb-4 text-gray-400"},J={class:"w-full mb-4"},K={class:"flex items-center mb-1 text-gray-500 gap-3"},R={class:"w-full flex justify-end"},O=N({__name:"ProfileView",setup(T){const{getProfile:V,auth:n,processing:w,updateProfile:y,updatePassword:C}=U();A(()=>V());const t=c({name:"",email:""}),e=c({current_password:"",password:"",password_confirmation:""}),d=c(!1);function k(){y({name:t.value.name,email:t.value.email})}function P(){if(!e.value.current_password){u.error("Ingrese su contraseña actual");return}if(e.value.password.length<8){u.error("La contraseña debe tener al menos 8 caracteres");return}if(!/[A-Z]/.test(e.value.password)){u.error("La contraseña debe tener al menos una mayúscula");return}if(!/[0-9]/.test(e.value.password)){u.error("La contraseña debe tener al menos un número");return}if(e.value.password!==e.value.password_confirmation){u.error("Las confirmacion de contraseña no coincide");return}C(e.value)}return z(()=>n.value,m=>{m&&(t.value.name=m.name,t.value.email=m.email)}),(m,a)=>(v(),p("div",M,[r(n)?(v(),p("div",S,[s("div",j,[q,s("div",G," Registrado el "+_(r(h)(r(n).createdAt)),1),l(i,{text:"Nombre",name:"name",modelValue:t.value.name,"onUpdate:modelValue":a[0]||(a[0]=o=>t.value.name=o),placeholder:"Nombre completo"},null,8,["modelValue"]),l(i,{text:"Correo",name:"email",modelValue:t.value.email,"onUpdate:modelValue":a[1]||(a[1]=o=>t.value.email=o),placeholder:"Correo electrónico"},null,8,["modelValue"])]),s("div",I,[l(b,{onClick:k,loading:r(w)},{default:x(()=>[f("Guardar")]),_:1},8,["loading"])])])):g("",!0),s("form",{onSubmit:L(P,["prevent"]),class:"bg-white p-8 rounded-xl border flex flex-col"},[s("div",$,[E,r(n)?(v(),p("div",F," Actualizada por última vez el "+_(r(h)(r(n).passwordUpdatedAt)),1)):g("",!0),l(i,{text:"Contraseña",name:"current_password",modelValue:e.value.current_password,"onUpdate:modelValue":a[2]||(a[2]=o=>e.value.current_password=o),placeholder:"Ingrese su contraseña actual",type:d.value?"text":"password",required:""},null,8,["modelValue","type"]),l(i,{text:"Nueva contraseña",name:"password",modelValue:e.value.password,"onUpdate:modelValue":a[3]||(a[3]=o=>e.value.password=o),placeholder:"Ingrese la nueva contraseña",type:d.value?"text":"password",required:""},null,8,["modelValue","type"]),l(i,{text:"Confirmar contraseña",name:"password",modelValue:e.value.password_confirmation,"onUpdate:modelValue":a[4]||(a[4]=o=>e.value.password_confirmation=o),placeholder:"Confirmar la nueva contraseña",type:d.value?"text":"password",required:""},null,8,["modelValue","type"]),s("div",J,[s("label",K,[B(s("input",{type:"checkbox",name:"showPassword",class:"h-5 w-5 border-gray-300 rounded-md block transition duration-300 ease-in-out","onUpdate:modelValue":a[5]||(a[5]=o=>d.value=o)},null,512),[[D,d.value]]),f(" Mostrar contraseña ")])])]),s("div",R,[l(b,{type:"submit",loading:r(w)},{default:x(()=>[f("Guardar")]),_:1},8,["loading"])])],32)]))}});export{O as default};
