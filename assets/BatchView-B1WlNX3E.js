import{b as P,o as S,r as b,w as E,e as d,m as o,n,_ as F,i as t,f as a,p as x,T as I,F as p,k as u,g as f,t as r,q as j,v as h,x as k,h as v,R as C,l as z,y as D,j as L,I as O,z as A}from"./index-DoD9Z4gP.js";import{u as M}from"./useBatch-DuI7gbQX.js";import{I as R}from"./IconEye-D_u7bKNA.js";import{_ as g}from"./InputForm.vue_vue_type_script_setup_true_lang-BoxpC0zP.js";import{_ as G}from"./PaginationComponent.vue_vue_type_script_setup_true_lang-DvnRgicT.js";import{u as W}from"./usePrice-DP-vEKvH.js";const H=t("option",{value:""},"Selecciona un tipo",-1),J=["value"],K={class:"flex justify-end gap-4"},Q={class:"flex items-center justify-between mb-8 h-14"},X=t("span",{class:"font-bold text-2xl"},"Lotes",-1),Y={class:"grid grid-cols-4 gap-4 mb-4"},Z=t("option",{value:""},"Selecciona un tipo",-1),ee=["value"],te=t("th",null,"Usuario",-1),ae=t("th",null,"Fecha",-1),oe=t("th",null,"Tipo",-1),le=t("th",null,"C贸digo o referencia",-1),se=t("th",null,"Paquetes",-1),ne=t("th",null,"Total",-1),ue=t("th",null,"Acciones",-1),de={key:0},re=t("td",{colspan:"7",class:"text-center"},"No hay datos que mostrar",-1),ie=[re],ce={class:"flex gap-4"},pe=["onClick"],be=P({__name:"BatchView",setup(_e){const{getBatches:y,batches:_,processing:T,updateBatch:$,queryParams:i}=M(),{prices:V,getPrices:B}=W();S(()=>{y(),B()});const l=b(null),c=b(!1);function w(m){l.value={...m},c.value=!0}function N(){if(l.value){if(!l.value.type||!l.value.code||!l.value.total)return A.error("Todos los campos son requeridos");$(l.value,()=>{c.value=!1,l.value=null})}}E(i.value,()=>y(),{debounce:500,maxWait:1e3});function U(m){i.value.page=m*1}return(m,s)=>(u(),d(p,null,[o(F,{title:"Editar",isOpen:c.value,onOnClose:s[4]||(s[4]=e=>c.value=!1)},{default:n(()=>[l.value?(u(),d(p,{key:0},[o(g,{text:"Total",name:"total",modelValue:l.value.total,"onUpdate:modelValue":s[0]||(s[0]=e=>l.value.total=e),type:"number"},null,8,["modelValue"]),o(g,{text:"C贸digo o referencia",name:"code",modelValue:l.value.code,"onUpdate:modelValue":s[1]||(s[1]=e=>l.value.code=e)},null,8,["modelValue"]),o(x,{text:"Tipo",name:"type",modelValue:l.value.type,"onUpdate:modelValue":s[2]||(s[2]=e=>l.value.type=e)},{default:n(()=>[H,(u(!0),d(p,null,f(a(V),e=>(u(),d("option",{value:e.type,key:e.id},r(e.type),9,J))),128))]),_:1},8,["modelValue"]),t("div",K,[o(j,{onClick:s[3]||(s[3]=e=>c.value=!1)},{default:n(()=>[h("Cancelar")]),_:1}),o(k,{onClick:N,loading:a(T)},{default:n(()=>[h(" Guardar ")]),_:1},8,["loading"])])],64)):v("",!0)]),_:1},8,["isOpen"]),t("header",Q,[X,o(a(C),{to:{name:"batches.create"}},{default:n(()=>[o(k,null,{default:n(()=>[h(" Nuevo ")]),_:1})]),_:1})]),t("div",Y,[o(g,{text:"C贸digo o referencia",name:"code",modelValue:a(i).code,"onUpdate:modelValue":s[5]||(s[5]=e=>a(i).code=e),type:"search",placeholder:"Buscar c贸digo o referencia"},null,8,["modelValue"]),o(x,{text:"Tipo",name:"type",modelValue:a(i).type,"onUpdate:modelValue":s[6]||(s[6]=e=>a(i).type=e)},{default:n(()=>[Z,(u(!0),d(p,null,f(a(V),e=>(u(),d("option",{value:e.type,key:e.id},r(e.type),9,ee))),128))]),_:1},8,["modelValue"])]),o(I,null,{header:n(()=>[te,ae,oe,le,se,ne,ue]),body:n(()=>[a(_).data.length?v("",!0):(u(),d("tr",de,ie)),(u(!0),d(p,null,f(a(_).data,(e,q)=>(u(),d("tr",{key:q,class:"hover:bg-gray-50"},[t("td",null,[e.user?(u(),z(D,{key:0,item:e.user},null,8,["item"])):v("",!0)]),t("td",null,r(a(L)(e.createdAt)),1),t("td",null,r(e.type),1),t("td",null,r(e.code),1),t("td",null,r(e.packages.length),1),t("td",null,"$"+r(e.total),1),t("td",null,[t("div",ce,[o(a(C),{to:{name:"batches.show",params:{id:e.id}}},{default:n(()=>[o(a(R),{size:"20"})]),_:2},1032,["to"]),t("button",{type:"button",onClick:me=>w(e)},[o(a(O),{size:"20"})],8,pe)])])]))),128))]),_:1}),o(G,{pages:a(_).pages,page:a(_).current,onSelected:U},null,8,["pages","page"])],64))}});export{be as default};
